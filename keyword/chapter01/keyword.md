# 🎯 핵심 키워드

---

- DB Join이란?
  데이터베이스에서 조인(Join)은 여러 테이블에 흩어져 있는 데이터를 **하나로 합쳐서** 조회하기 위한 방법.
  - 두 개 이상의 테이블을 조건에 맞게 연결해서 하나의 결과 집합을 만드는 것.
  - 보통 테이블 간에는 **외래 키(Foreign Key)** 같은 공통된 컬럼을 통해 관계를 맺고, 이 컬럼을 기준으로 조인을 수행한다.
  - 두 개의 테이블을 엮어 원하는 결과가 나오도록 만듦. → 원하는 데이터를 엮어서 추출 가능.
- Join 종류들
  ### 1. INNER JOIN
  - 두 테이블에서 **조건이 일치하는 행만** 가져온다.
  - 두 테이블에 모두 지정한 열의 데이터가 있어야 한다.
  - 가장 많이 쓰이는 조인 방식이다.
  ```sql
  SELECT u.id, u.name, o.order_date
  FROM users u
  INNER JOIN orders o ON u.id = o.user_id;
  ```
  👉 사용자와 주문이 모두 존재하는 경우만 결과에 포함한다.
  ***
  ### 2. LEFT JOIN (또는 LEFT OUTER JOIN)
  - 1개의 테이블에만 데이터가 있어도 결과가 나온다.
  - **왼쪽 테이블의 모든 행**을 가져오고, 오른쪽 테이블에서 일치하는 값이 있으면 매칭한다.
  - 없으면 NULL이 채워진다.
  ```sql
  SELECT u.id, u.name, o.order_date
  FROM users u
  LEFT JOIN orders o ON u.id = o.user_id;
  ```
  👉 주문이 없는 사용자도 결과에 포함됨 (`order_date`는 NULL).
  ***
  ### 3. RIGHT JOIN (RIGHT OUTER JOIN)
  - **오른쪽 테이블의 모든 행**을 가져오고, 왼쪽 테이블과 매칭된다.
  - 없으면 NULL이 채워진다.
  ```sql
  SELECT u.id, u.name, o.order_date
  FROM users u
  RIGHT JOIN orders o ON u.id = o.user_id;
  ```
  👉 모든 주문은 결과에 나오고, 주문에 해당하는 사용자가 없으면 `u.name`이 NULL.
  ***
  ### 4. FULL OUTER JOIN
  - 한 개의 테이블에만 데이터가 있어도 결과가 나온다.
  - 두 테이블의 모든 행을 다 가져온다.
  - 매칭이 없으면 NULL이 채워진다.
  ```sql
  SELECT u.id, u.name, o.order_date
  FROM users u
  FULL OUTER JOIN orders o ON u.id = o.user_id;
  ```
  👉 MySQL은 기본적으로 지원하지 않고, PostgreSQL 같은 DB에서 사용 가능.
  ***
  ### 5. CROSS JOIN
  - 한 쪽 테이블의 모든 행과 다른 쪽 테이블의 모든 행을 조인한다.
  - 조건 없이 모든 조합(카티션 곱)을 생성한다.
  - 조합 수 = 왼쪽 테이블 행 × 오른쪽 테이블 행.
  ```sql
  SELECT u.id, u.name, p.product_name
  FROM users u
  CROSS JOIN products p;
  ```
  👉 모든 사용자 × 모든 상품 조합.
- 트랜잭션이란?
  ## **정의**
  트랜잭션은 DB의 상태를 변경시키는 작업의 단위이다.
  쉽게 말해, 한꺼번에 수행되어야 할 연산을 모아놓은 것이다.
  연산들을 모두 처리하지 못 한 경우에는 원 상태로 복구한다. 즉, 작업의 일부만 적용되는 현상이 발생하지 않는다.
  이를 통해 트랜잭션은 작업의 **완전성**을 보장해준다.
  사용자의 입장에서는 작업의 논리적 단위이고,
  시스템의 입장에서는 데이터들을 접근 또는 변경하는 프로그램의 단위가 된다.
  ***
  ## 트랜잭션의 특징 : ACID
  ### Atomicity (원자성)
  트랜잭션이 DB에 모두 반영되거나, 혹은 전혀 반영되지 않아야 된다 (All or Nothing).
  ### Consistenty (일관성)
  트랜잭션의 작업 처리 결과는 항상 일관성 있어야 한다.
  시스템이 가지고 있는 고정 요소는 트랜잭션 수행 전과 수행 후의 상태가 같아야 한다는 말로,
  DB의 제약조건을 위배하는 작업을 트랜잭션 과정에서 수행할 수 없음을 나타낸다.
  ex) 송금 시 금액의 데이터 타입을 정수형(integer)에서 문자열(string)로 변경할 수 없음.
  ### Isolation (독립성)
  둘 이상의 트랜잭션이 동시에 병행 실행되고 있을 때, 어떤 트랜잭션도 다른 트랜잭션 연산에 끼어들 수 없다.
  ### Durability (지속성)
  트랜잭션이 성공적으로 완료되었으면, 결과는 영구적으로 반영되어야 한다.
  ***
  ## 트랜잭션의 연산
  ### (1) COMMIT 연산
  **트랜잭션이 성공적으로 수행되었음을 선언하는 연산**으로,
  `COMMIT` 연산의 실행을 통해 트랜잭션의 수행이 성공적으로 완료되었음을 선언하고, 그 결과를 최종 DB에 반영한다.
  ### (2) ROLLBACK 연산
  **트랜잭션 수행이 실패했음을 선언하고 작업을 취소하는 연산**으로,
  트랜잭션이 수행되는 도중 일부 연산이 처리되지 못한 상황이라면 `ROLLBACK` 연산을 실행하여 트랜잭션 수행이 실패했음을 선언하고, DB를 트랜잭션 수행 전과 일관된 상태로 되돌려야 한다.
  ***
  ## 트랜잭션의 상태
  ### Active
  트랜잭션 활동 상태
  트랜잭션이 실행 중이며 동작 중인 상태를 말한다.
  ### Partially Committed
  트랜잭션의 `COMMIT` 명령이 도착한 상태
  트랜잭션의 `COMMIT` 이전 SQL문이 수행되고, `COMMIT` 만 남은 상태를 말한다.
  (트랜잭션의 마지막 연산까지 실행하고 `COMMIT` 연산을 실행하기 직전의 상태)
  ### Failed
  트랜잭션 실패 상태
  더이상 트랜잭션이 정상적으로 진행될 수 없는 상태를 말한다.
  ### Committed
  트랜잭션 완료 상태
  트랜잭션이 정상적으로 완료된 상태를 말한다.
  ### Aborted
  트랜잭션 취소 상태
  트랜잭션이 취소되고, 트랜잭션 실행 이전 데이터로 돌아간 상태를 말한다.
  (트랜잭션 수행을 실패하고 `ROLLBACK` 연산을 실행한 상태)
- Join on 과 where의 차이
  ON : join 전에 조건을 필터링한다. → ON 조건으로 필터링이 된 레코드 간의 조인이 이루어진다.
  WHERE : join 후에 조건을 필터링한다. → join 한 결과에서 WHERE 조건절로 필터링이 이루어진다.
  → join을 할 대상(범위)이 달라짐.
  Inner join 시에는 차이가 없지만, Outer join 할 때 차이가 발생한다.
